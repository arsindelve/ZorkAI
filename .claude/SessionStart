#!/bin/bash

# SessionStart hook for ZorkAI project
# This script runs when a new Claude Code session starts
# It restores NuGet packages so dotnet build and test can run

echo "=== ZorkAI Session Start ==="
echo "Restoring NuGet packages..."

cd /home/user/ZorkAI || exit 1

# Run dotnet restore with timeout to prevent hanging
# Suppress most output, only show important messages
timeout 300 dotnet restore 2>&1 | grep -E "(Restored|restored|Restore completed|error NU|warning NU)" || {
    echo "Warning: dotnet restore may have failed or timed out"
    exit 0  # Don't fail the session start
}

echo "Package restore complete. dotnet build and dotnet test are now available."
echo "=== Session Ready ==="
